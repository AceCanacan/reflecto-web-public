{"ast":null,"code":"var _jsxFileName = \"/Users/acecanacan/Developer/medchat-web copy/src/pages/ChatPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport '../pages-css/ChatPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'https://api.openai.com/v1/chat/completions';\nconst API_KEY = \"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\";\nfunction ChatPage({\n  location\n}) {\n  _s();\n  const [loading, setLoading] = useState(false);\n  const [userInput, setUserInput] = useState('');\n  const [messages, setMessages] = useState([]);\n  const {\n    state = {}\n  } = location || {};\n  const {\n    situation,\n    involved,\n    documents,\n    expectations\n  } = state;\n  const inputRef = useRef(null);\n  const navigate = useNavigate();\n  const goToOutputPage = () => {\n    navigate('/outputpage', {\n      state: {\n        messages\n      }\n    }); // navigate to OutputPage with messages as state\n  };\n\n  const sendMessage = async () => {\n    if (!userInput.trim()) return;\n    setLoading(true);\n    const userMessage = {\n      role: 'user',\n      content: userInput\n    };\n    // If needed, modify the systemMessage content as per your needs.\n    const systemMessage = {\n      role: 'assistant',\n      content: `: ${situation}. : ${involved} : ${documents}  ${expectations}}\n      This is the context about the patient\n      ChatGPT, you are an empathetic legal consultant in the Philippines so focus on Philippine Laws. Your primary role is to gain a deeper understanding of the client's situation by asking relevant questions. Your objective is not to provide advice or definitive information but to probe the circumstances and gather more details about the issue at hand.\n      Ensure you build a complete picture by clarifying any ambiguities or uncertainties in the client's responses. \n      Ask about the current status of the issue, the factors that led to the present situation, the client's thoughts and feelings, and any additional information that might be relevant to the case.\n      However, remember to respect the client's comfort and time, evaluate whether you've obtained sufficient information to understand the situation.\n      When the conversation has become extensive or you believe you've collected enough details, kindly ask the client if they have anything more they'd like to discuss or clarify. \n      I highly emphasize that you are not here to provide any legal advice to the client, you are just there to ask questions to get details about their situation.\n  \n      CHAT GPT IT IS IMPERATIVE THAT YOU DO NOT GIVE MORE THAN ONE QUESTION PER ANSWER OR MESSAGE YOU SEND.\n      DO NOT OVERWHELM THE CLIENT BY PROVIDING A BARRAGE OF QUESTIONS\n      ASK ONE QUESTION AT A TIME`\n    };\n    try {\n      const response = await axios.post(API_URL, {\n        model: 'gpt-3.5-turbo',\n        messages: [...messages, systemMessage, userMessage]\n      }, {\n        headers: {\n          'Authorization': `Bearer ${API_KEY}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      const botMessage = {\n        role: 'system',\n        content: response.data.choices[0].message.content.trim()\n      };\n      setMessages(prevMessages => [...prevMessages, userMessage, botMessage]);\n    } catch (error) {\n      var _error$response;\n      console.error(\"Error response from OpenAI:\", (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n    }\n    setUserInput('');\n    setLoading(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-container-chatpage\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: message.role === 'user' ? 'user-message' : 'bot-message',\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: message.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-container-chat\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        ref: inputRef,\n        type: \"text\",\n        value: userInput,\n        onChange: e => setUserInput(e.target.value),\n        placeholder: \"Type a message...\",\n        disabled: loading,\n        className: \"user-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendMessage,\n        disabled: loading || !userInput.trim(),\n        className: loading || !userInput.trim() ? 'send-button-disabled' : 'send-button',\n        children: loading ? '➤' : '➤'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: goToOutputPage,\n      className: \"submit-button\",\n      children: \"Generate\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatPage, \"rChdovIDzUViuEvXl5iDHXPM/2w=\", false, function () {\n  return [useNavigate];\n});\n_c = ChatPage;\nexport default ChatPage;\nvar _c;\n$RefreshReg$(_c, \"ChatPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","axios","useNavigate","jsxDEV","_jsxDEV","API_URL","API_KEY","ChatPage","location","_s","loading","setLoading","userInput","setUserInput","messages","setMessages","state","situation","involved","documents","expectations","inputRef","navigate","goToOutputPage","sendMessage","trim","userMessage","role","content","systemMessage","response","post","model","headers","botMessage","data","choices","message","prevMessages","error","_error$response","console","className","children","map","index","fileName","_jsxFileName","lineNumber","columnNumber","ref","type","value","onChange","e","target","placeholder","disabled","onClick","_c","$RefreshReg$"],"sources":["/Users/acecanacan/Developer/medchat-web copy/src/pages/ChatPage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\nimport '../pages-css/ChatPage.css';\n\nconst API_URL = 'https://api.openai.com/v1/chat/completions';\nconst API_KEY = \"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\";\n\n\nfunction ChatPage({ location }) {\n  const [loading, setLoading] = useState(false);\n  const [userInput, setUserInput] = useState('');\n  const [messages, setMessages] = useState([]);\n\n  const { state = {} } = location || {};\n  const { situation, involved, documents, expectations } = state;\n\n  const inputRef = useRef(null);\n  const navigate = useNavigate();\n\n\n  const goToOutputPage = () => {\n    navigate('/outputpage', { state: { messages } }); // navigate to OutputPage with messages as state\n  };\n\n\n  const sendMessage = async () => {\n    if (!userInput.trim()) return;\n    setLoading(true);\n\n    const userMessage = { role: 'user', content: userInput };\n    // If needed, modify the systemMessage content as per your needs.\n    const systemMessage = {\n      role: 'assistant',\n      content: `: ${situation}. : ${involved} : ${documents}  ${expectations}}\n      This is the context about the patient\n      ChatGPT, you are an empathetic legal consultant in the Philippines so focus on Philippine Laws. Your primary role is to gain a deeper understanding of the client's situation by asking relevant questions. Your objective is not to provide advice or definitive information but to probe the circumstances and gather more details about the issue at hand.\n      Ensure you build a complete picture by clarifying any ambiguities or uncertainties in the client's responses. \n      Ask about the current status of the issue, the factors that led to the present situation, the client's thoughts and feelings, and any additional information that might be relevant to the case.\n      However, remember to respect the client's comfort and time, evaluate whether you've obtained sufficient information to understand the situation.\n      When the conversation has become extensive or you believe you've collected enough details, kindly ask the client if they have anything more they'd like to discuss or clarify. \n      I highly emphasize that you are not here to provide any legal advice to the client, you are just there to ask questions to get details about their situation.\n  \n      CHAT GPT IT IS IMPERATIVE THAT YOU DO NOT GIVE MORE THAN ONE QUESTION PER ANSWER OR MESSAGE YOU SEND.\n      DO NOT OVERWHELM THE CLIENT BY PROVIDING A BARRAGE OF QUESTIONS\n      ASK ONE QUESTION AT A TIME`,\n    };\n\n    try {\n      const response = await axios.post(API_URL, {\n        model: 'gpt-3.5-turbo',\n        messages: [...messages, systemMessage, userMessage],\n      }, {\n        headers: {\n          'Authorization': `Bearer ${API_KEY}`,\n          'Content-Type': 'application/json',\n        },\n      });\n\n      const botMessage = { role: 'system', content: response.data.choices[0].message.content.trim() };\n      setMessages((prevMessages) => [...prevMessages, userMessage, botMessage]);\n    } catch (error) {\n      console.error(\"Error response from OpenAI:\", error.response?.data);\n    }\n\n    setUserInput('');\n    setLoading(false);\n  };\n\n  return (\n    <div className=\"main-container-chatpage\">\n      <div className=\"messages-container\">\n        {messages.map((message, index) => (\n          <div \n            key={index} \n            className={message.role === 'user' ? 'user-message' : 'bot-message'}\n          >\n            <span>{message.content}</span>\n          </div>\n        ))}\n      </div>\n      \n        <div className=\"input-container-chat\">\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={userInput}\n            onChange={(e) => setUserInput(e.target.value)}\n            placeholder=\"Type a message...\"\n            disabled={loading}\n            className=\"user-input\"\n          />\n          <button \n            onClick={sendMessage} \n            disabled={loading || !userInput.trim()}\n            className={loading || !userInput.trim() ? 'send-button-disabled' : 'send-button'}\n          >\n            {loading ? '➤' : '➤'}\n          </button>\n        </div>\n       \n\n      <button onClick={goToOutputPage} className=\"submit-button\">\n          Generate\n        </button>\n    </div>\n  );\n  \n}\n\nexport default ChatPage;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}