{"ast":null,"code":"var _jsxFileName = \"/Users/acecanacan/Developer/medchat-web/src/pages/OutputPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_URL = 'https://api.openai.com/v1/chat/completions';\nconst API_KEY = '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';\nconst OutputPage = ({\n  messages\n}) => {\n  _s();\n  const [summary, setSummary] = useState({\n    date: '',\n    content: ''\n  });\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    const getSummary = async () => {\n      try {\n        setLoading(true);\n        const userMessages = messages.filter(message => message.role !== 'system');\n        const response = await axios.post(API_URL, {\n          model: 'gpt-3.5-turbo',\n          messages: [...userMessages, {\n            role: 'user',\n            content: `You are an empathetic, AI-powered assistant, designed to provide support in a medical context. Your user is a patient who has already provided detailed information about their health concerns. Your task is to analyze this information from a medical perspective and provide a summary of the possible condition they might be experiencing, potential causes, and general advice on symptom management.\n\n            For example, if the patient has described symptoms of diarrhea, you might suggest that they could be experiencing food poisoning, which can be caused by consuming contaminated food or water. You could then provide general advice such as staying hydrated and resting.\n\n            Remember, your role is purely informational, and under no circumstances should you attempt to provide medical advice or diagnosis. Always take into account the context provided by the patient and ensure your responses are both medically accurate and understandable to a layperson.\n\n            After providing the summary, remind the patient that this is an AI-generated response and it's crucial for them to consult with a healthcare professional who can provide advice based on a comprehensive understanding of their symptoms and medical history\n\n            Do not show any signs of uncertainty such as \"i cannot pinpoint the exact cause\". The patient knows you are a bot, and knows that you have limitations. No need to tell them.\n\n            Separate per part\n            - Summary of Symptoms\n            (explain what measures can they take to alleviaet their problem)\n            - Possible Diagnosis\n            (talk about the probable disease or condition they have)\n            - Potentaial Causes\n            (explain the potential cause of their condition)` // Keep your message content here\n          }]\n        }, {\n          headers: {\n            'Authorization': `Bearer ${API_KEY}`,\n            'Content-Type': 'application/json'\n          }\n        });\n        const fetchedSummary = {\n          date: new Date().toISOString(),\n          content: response.data.choices[0].message.content.trim()\n        };\n        setSummary(fetchedSummary);\n        setLoading(false);\n      } catch (error) {\n        var _error$response;\n        console.error(\"Error response from OpenAI:\", (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n        setLoading(false);\n      }\n    };\n    getSummary();\n  }, [messages]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: styles.container,\n    children: loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.loader,\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      style: styles.outputBox,\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        style: styles.summaryText,\n        children: summary.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n_s(OutputPage, \"37+XmtbctNd9uu0Wd8A8Bx6wgdM=\");\n_c = OutputPage;\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: '5%'\n  },\n  loader: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    color: '#1abc9c'\n  },\n  outputBox: {\n    overflowY: 'auto',\n    width: '90%',\n    maxHeight: '70vh',\n    padding: '2%',\n    border: '1px solid #ccc',\n    borderRadius: '8px'\n  },\n  summaryText: {\n    fontSize: '1rem',\n    color: '#333'\n  }\n};\nexport default OutputPage;\nvar _c;\n$RefreshReg$(_c, \"OutputPage\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","API_URL","API_KEY","OutputPage","messages","_s","summary","setSummary","date","content","loading","setLoading","getSummary","userMessages","filter","message","role","response","post","model","headers","fetchedSummary","Date","toISOString","data","choices","trim","error","_error$response","console","style","styles","container","children","loader","fileName","_jsxFileName","lineNumber","columnNumber","outputBox","summaryText","_c","display","flexDirection","justifyContent","alignItems","padding","color","overflowY","width","maxHeight","border","borderRadius","fontSize","$RefreshReg$"],"sources":["/Users/acecanacan/Developer/medchat-web/src/pages/OutputPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst API_URL = 'https://api.openai.com/v1/chat/completions';\nconst API_KEY = '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';\n\nconst OutputPage = ({ messages }) => {\n  const [summary, setSummary] = useState({date: '', content: ''});\n  const [loading, setLoading] = useState(true);\n  \n  useEffect(() => {\n    const getSummary = async () => {\n      try {\n        setLoading(true); \n        const userMessages = messages.filter(message => message.role !== 'system');\n        \n        const response = await axios.post(API_URL, {\n          model: 'gpt-3.5-turbo',\n          messages: [...userMessages, {\n            role: 'user',\n            content: `You are an empathetic, AI-powered assistant, designed to provide support in a medical context. Your user is a patient who has already provided detailed information about their health concerns. Your task is to analyze this information from a medical perspective and provide a summary of the possible condition they might be experiencing, potential causes, and general advice on symptom management.\n\n            For example, if the patient has described symptoms of diarrhea, you might suggest that they could be experiencing food poisoning, which can be caused by consuming contaminated food or water. You could then provide general advice such as staying hydrated and resting.\n\n            Remember, your role is purely informational, and under no circumstances should you attempt to provide medical advice or diagnosis. Always take into account the context provided by the patient and ensure your responses are both medically accurate and understandable to a layperson.\n\n            After providing the summary, remind the patient that this is an AI-generated response and it's crucial for them to consult with a healthcare professional who can provide advice based on a comprehensive understanding of their symptoms and medical history\n\n            Do not show any signs of uncertainty such as \"i cannot pinpoint the exact cause\". The patient knows you are a bot, and knows that you have limitations. No need to tell them.\n\n            Separate per part\n            - Summary of Symptoms\n            (explain what measures can they take to alleviaet their problem)\n            - Possible Diagnosis\n            (talk about the probable disease or condition they have)\n            - Potentaial Causes\n            (explain the potential cause of their condition)`, // Keep your message content here\n          }],\n        }, {\n          headers: {\n            'Authorization': `Bearer ${API_KEY}`,\n            'Content-Type': 'application/json',\n          },\n        });\n        \n        const fetchedSummary = {\n          date: new Date().toISOString(),\n          content: response.data.choices[0].message.content.trim()\n        };\n        setSummary(fetchedSummary);\n        setLoading(false);\n        \n      } catch (error) {\n        console.error(\"Error response from OpenAI:\", error.response?.data);\n        setLoading(false);\n      }\n    };\n    \n    getSummary();\n  }, [messages]);\n\n  return (\n    <div style={styles.container}>\n      {loading ? (\n        <div style={styles.loader}>Loading...</div>\n      ) : (\n        <div style={styles.outputBox}>\n          <p style={styles.summaryText}>{summary.content}</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst styles = {\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    padding: '5%',\n  },\n  loader: {\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n    color: '#1abc9c',\n  },\n  outputBox: {\n    overflowY: 'auto',\n    width: '90%',\n    maxHeight: '70vh',\n    padding: '2%',\n    border: '1px solid #ccc',\n    borderRadius: '8px',\n  },\n  summaryText: {\n    fontSize: '1rem',\n    color: '#333',\n  }\n};\n\nexport default OutputPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}